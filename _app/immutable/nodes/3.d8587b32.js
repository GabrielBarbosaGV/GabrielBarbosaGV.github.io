import{R as $e,T as Be,S as Ue,i as Je,s as Ke,k as P,q as j,a as R,y as We,l as $,m as V,r as A,h as w,c as T,z as Xe,n as C,J as Ze,b as q,G as d,A as Qe,O as H,M as xe,f as Oe,g as fe,d as ue,B as et,P as de,o as tt,u as Se,U as qe,V as Le,W as Fe,X as Ge,Y as He,Z as Ne,H as he,v as Ve,_ as Ce,$ as nt}from"../chunks/index.201e1dc2.js";import{C as rt}from"../chunks/CodeBlock.c805c78d.js";function ze(s){const t=s-1;return t*t*t+1}function lt(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(s);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(s,n[u])&&(e[n[u]]=s[n[u]]);return e}function ot(s){var{fallback:t}=s,e=lt(s,["fallback"]);const n=new Map,u=new Map;function i(a,_,o){const{delay:g=0,duration:p=y=>Math.sqrt(y)*30,easing:k=ze}=$e($e({},e),o),c=_.getBoundingClientRect(),E=a.left-c.left,f=a.top-c.top,m=a.width/c.width,b=a.height/c.height,x=Math.sqrt(E*E+f*f),M=getComputedStyle(_),N=M.transform==="none"?"":M.transform,z=+M.opacity;return{delay:g,duration:Be(p)?p(x):p,easing:k,css:(y,L)=>`
				opacity: ${y*z};
				transform-origin: top left;
				transform: ${N} translate(${L*E}px,${L*f}px) scale(${y+(1-y)*m}, ${y+(1-y)*b});
			`}}function v(a,_,o){return(g,p)=>(a.set(p.key,{rect:g.getBoundingClientRect()}),()=>{if(_.has(p.key)){const{rect:k}=_.get(p.key);return _.delete(p.key),i(k,g,p)}return a.delete(p.key),t&&t(g,p,o)})}return[v(u,n,!1),v(n,u,!0)]}function Ye(s,{from:t,to:e},n={}){const u=getComputedStyle(s),i=u.transform==="none"?"":u.transform,[v,a]=u.transformOrigin.split(" ").map(parseFloat),_=t.left+t.width*v/e.width-(e.left+v),o=t.top+t.height*a/e.height-(e.top+a),{delay:g=0,duration:p=c=>Math.sqrt(c)*120,easing:k=ze}=n;return{delay:g,duration:Be(p)?p(Math.sqrt(_*_+o*o)):p,easing:k,css:(c,E)=>{const f=E*_,m=E*o,b=c+E*t.width/e.width,x=c+E*t.height/e.height;return`transform: ${i} translate(${f}px, ${m}px) scale(${b}, ${x});`}}}function je(s,t,e){const n=s.slice();return n[14]=t[e],n}function Ae(s,t,e){const n=s.slice();return n[14]=t[e],n}function Me(s,t){let e,n=t[14]+"",u,i,v,a,_,o=he,g,p,k;function c(){return t[9](t[14])}function E(){return t[10](t[14])}return{key:s,first:null,c(){e=P("div"),u=j(n),i=R(),this.h()},l(f){e=$(f,"DIV",{class:!0});var m=V(e);u=A(m,n),i=T(m),m.forEach(w),this.h()},h(){C(e,"class","bg-green-200 w-[10vw] my-2 rounded-md flex justify-center items-center cursor-pointer"),this.first=e},m(f,m){q(f,e,m),d(e,u),d(e,i),g=!0,p||(k=[H(e,"click",c),H(e,"keydown",E)],p=!0)},p(f,m){t=f,(!g||m&1)&&n!==(n=t[14]+"")&&Se(u,n)},r(){_=e.getBoundingClientRect()},f(){qe(e),o(),Le(e,_)},a(){o(),o=Fe(e,_,Ye,{})},i(f){g||(Ge(()=>{a&&a.end(1),v=He(e,t[5],{key:t[14]}),v.start()}),g=!0)},o(f){v&&v.invalidate(),a=Ne(e,t[4],{key:t[14]}),g=!1},d(f){f&&w(e),f&&a&&a.end(),p=!1,de(k)}}}function Re(s,t){let e,n=t[14]+"",u,i,v,a,_,o=he,g,p,k;function c(){return t[11](t[14])}function E(){return t[12](t[14])}return{key:s,first:null,c(){e=P("div"),u=j(n),i=R(),this.h()},l(f){e=$(f,"DIV",{class:!0});var m=V(e);u=A(m,n),i=T(m),m.forEach(w),this.h()},h(){C(e,"class","bg-green-200 w-[10vw] my-2 rounded-md flex justify-center items-center cursor-pointer"),this.first=e},m(f,m){q(f,e,m),d(e,u),d(e,i),g=!0,p||(k=[H(e,"click",c),H(e,"keydown",E)],p=!0)},p(f,m){t=f,(!g||m&2)&&n!==(n=t[14]+"")&&Se(u,n)},r(){_=e.getBoundingClientRect()},f(){qe(e),o(),Le(e,_)},a(){o(),o=Fe(e,_,Ye,{})},i(f){g||(Ge(()=>{a&&a.end(1),v=He(e,t[5],{key:t[14]}),v.start()}),g=!0)},o(f){v&&v.invalidate(),a=Ne(e,t[4],{key:t[14]}),g=!1},d(f){f&&w(e),f&&a&&a.end(),p=!1,de(k)}}}function Te(s){let t;return{c(){t=j("Video started playing...")},l(e){t=A(e,"Video started playing...")},m(e,n){q(e,t,n)},d(e){e&&w(t)}}}function st(s){let t=`
// Call before changing NodeRefs' positions
let (flip, clear) = prepare_flip(
    ids_to_node_refs,
    container_div_node_ref,
    "transform 0.6s".to_string()
).map_err(|err| format!("FLIP preparation failed with error: {err}"))?;

// Perform action that will change the NodeRefs' positions in page, such as setting signals
// ...

// Perform FLIP animation
flip().map_err(|err| format!("FLIP failed with error: {err}"))?;

// Await end, and then clear transition style
set_timeout(|| {
    if let Err(err) = clear() {
      console_log("Error occurred when trying to clear FLIP transition style: {err}");
    }
}, Duration::from_millis(600));
  `,e;return{c(){e=j(t)},l(n){e=A(n,t)},m(n,u){q(n,e,u)},p:he,d(n){n&&w(e)}}}function it(s){let t,e,n,u,i,v,a,_,o=[],g=new Map,p,k,c=[],E=new Map,f,m,b,x,M,N,z,y,L,K,_e,Q=!1,pe,ee,F,te,Y,ne,re,D,le,G,oe,B,se,W,ie,me,U=s[0];const ge=r=>r[14];for(let r=0;r<U.length;r+=1){let l=Ae(s,U,r),I=ge(l);g.set(I,o[r]=Me(I,l))}let J=s[1];const ve=r=>r[14];for(let r=0;r<J.length;r+=1){let l=je(s,J,r),I=ve(l);E.set(I,c[r]=Re(I,l))}function ye(){cancelAnimationFrame(pe),y.paused||(pe=nt(ye),Q=!0),s[13].call(y)}let O=s[3]&&Te();return D=new rt({props:{lang:"language-rust",$$slots:{default:[st]},$$scope:{ctx:s}}}),{c(){t=P("div"),e=P("h1"),n=j("The leptos_transition_flip Crate"),u=R(),i=P("div"),v=j(`Svelte trivializes the creation of element transitions among lists
  with the crossfade function. The resulting effect is this:

  `),a=P("div"),_=P("div");for(let r=0;r<o.length;r+=1)o[r].c();p=R(),k=P("div");for(let r=0;r<c.length;r+=1)c[r].c();f=R(),m=P("p"),b=j(`As I wanted the same effect with the also great Leptos Rust crate, I wrote a small crate,
    `),x=P("a"),M=j("leptos_transition_flip."),N=j(`
    It results in the same effect (click to play video):`),z=R(),y=P("video"),L=j(`Your browser does not support video tags

    `),K=P("track"),ee=R(),F=P("p"),O&&O.c(),te=R(),Y=P("p"),ne=j("Here is a simple usage example:"),re=R(),We(D.$$.fragment),le=R(),G=P("p"),oe=j(`A full code example can be found

      `),B=P("a"),se=j("here."),this.h()},l(r){t=$(r,"DIV",{class:!0});var l=V(t);e=$(l,"H1",{class:!0});var I=V(e);n=A(I,"The leptos_transition_flip Crate"),I.forEach(w),l.forEach(w),u=T(r),i=$(r,"DIV",{class:!0});var h=V(i);v=A(h,`Svelte trivializes the creation of element transitions among lists
  with the crossfade function. The resulting effect is this:

  `),a=$(h,"DIV",{class:!0});var X=V(a);_=$(X,"DIV",{class:!0});var we=V(_);for(let S=0;S<o.length;S+=1)o[S].l(we);we.forEach(w),p=T(X),k=$(X,"DIV",{class:!0});var ke=V(k);for(let S=0;S<c.length;S+=1)c[S].l(ke);ke.forEach(w),X.forEach(w),f=T(h),m=$(h,"P",{});var Z=V(m);b=A(Z,`As I wanted the same effect with the also great Leptos Rust crate, I wrote a small crate,
    `),x=$(Z,"A",{href:!0,class:!0});var be=V(x);M=A(be,"leptos_transition_flip."),be.forEach(w),N=A(Z,`
    It results in the same effect (click to play video):`),Z.forEach(w),z=T(h),y=$(h,"VIDEO",{class:!0,src:!0});var ae=V(y);L=A(ae,`Your browser does not support video tags

    `),K=$(ae,"TRACK",{kind:!0}),ae.forEach(w),ee=T(h),F=$(h,"P",{});var Ie=V(F);O&&O.l(Ie),Ie.forEach(w),te=T(h),Y=$(h,"P",{});var Ee=V(Y);ne=A(Ee,"Here is a simple usage example:"),Ee.forEach(w),re=T(h),Xe(D.$$.fragment,h),le=T(h),G=$(h,"P",{});var ce=V(G);oe=A(ce,`A full code example can be found

      `),B=$(ce,"A",{href:!0,class:!0});var Pe=V(B);se=A(Pe,"here."),Pe.forEach(w),ce.forEach(w),h.forEach(w),this.h()},h(){C(e,"class","text-3xl"),C(t,"class","flex flex-row justify-center items-center my-6"),C(_,"class","w-[50vw] flex flex-col justify-center items-center"),C(k,"class","w-[50vw] flex flex-col justify-center items-center"),C(a,"class","flex flex-row justify-around items-center my-6 mx-10"),C(x,"href","https://github.com/GabrielBarbosaGV/leptos-transition-flip"),C(x,"class","text-green-700 bg-orange-200"),C(K,"kind","captions"),C(y,"class","rounded-md my-6"),Ze(y.src,_e="flip_example.webm")||C(y,"src",_e),C(B,"href","https://github.com/GabrielBarbosaGV/leptos-transition-flip/tree/main/example-project"),C(B,"class","text-green-700 bg-orange-200"),C(i,"class","flex flex-col justify-center items-center my-6 mx-20")},m(r,l){q(r,t,l),d(t,e),d(e,n),q(r,u,l),q(r,i,l),d(i,v),d(i,a),d(a,_);for(let I=0;I<o.length;I+=1)o[I].m(_,null);d(a,p),d(a,k);for(let I=0;I<c.length;I+=1)c[I].m(k,null);d(i,f),d(i,m),d(m,b),d(m,x),d(x,M),d(m,N),d(i,z),d(i,y),d(y,L),d(y,K),d(i,ee),d(i,F),O&&O.m(F,null),d(i,te),d(i,Y),d(Y,ne),d(i,re),Qe(D,i,null),d(i,le),d(i,G),d(G,oe),d(G,B),d(B,se),W=!0,ie||(me=[H(y,"mouseup",s[8]),H(y,"timeupdate",ye)],ie=!0)},p(r,[l]){if(l&65){U=r[0],Ve();for(let h=0;h<o.length;h+=1)o[h].r();o=xe(o,l,ge,1,r,U,g,_,Ce,Me,null,Ae);for(let h=0;h<o.length;h+=1)o[h].a();Oe()}if(l&130){J=r[1],Ve();for(let h=0;h<c.length;h+=1)c[h].r();c=xe(c,l,ve,1,r,J,E,k,Ce,Re,null,je);for(let h=0;h<c.length;h+=1)c[h].a();Oe()}!Q&&l&4&&!isNaN(r[2])&&(y.currentTime=r[2]),Q=!1,r[3]?O||(O=Te(),O.c(),O.m(F,null)):O&&(O.d(1),O=null);const I={};l&524288&&(I.$$scope={dirty:l,ctx:r}),D.$set(I)},i(r){if(!W){for(let l=0;l<U.length;l+=1)fe(o[l]);for(let l=0;l<J.length;l+=1)fe(c[l]);fe(D.$$.fragment,r),W=!0}},o(r){for(let l=0;l<o.length;l+=1)ue(o[l]);for(let l=0;l<c.length;l+=1)ue(c[l]);ue(D.$$.fragment,r),W=!1},d(r){r&&w(t),r&&w(u),r&&w(i);for(let l=0;l<o.length;l+=1)o[l].d();for(let l=0;l<c.length;l+=1)c[l].d();O&&O.d(),et(D),ie=!1,de(me)}}}function De(s,t,e){return[[...t.filter(n=>n!==s)],[...e,s]]}function at(s,t,e){const[n,u]=ot({});let i=["One","Two","Three"],v=[];function a(b){const[x,M]=De(b,i,v);e(0,i=x),e(1,v=M)}function _(b){const[x,M]=De(b,v,i);e(1,v=x),e(0,i=M)}let o=0,g=!1;function p(b){e(2,o=0),b.target.play(),e(3,g=!0),setTimeout(()=>e(3,g=!1),1e3)}tt(()=>{window!=null&&window.Prism&&window.Prism.highlightAll()});const k=b=>a(b),c=b=>a(b),E=b=>_(b),f=b=>_(b);function m(){o=this.currentTime,e(2,o)}return[i,v,o,g,n,u,a,_,p,k,c,E,f,m]}class ut extends Ue{constructor(t){super(),Je(this,t,at,it,Ke,{})}}export{ut as component};
